# Storage Configuration Example
# 
# This file demonstrates how to configure multiple storage providers
# for the RAG system. Copy this to storage.yaml and modify as needed.

providers:
  # MinIO configuration (default for development)
  minio:
    provider: minio
    credentials:
      access_key: minioadmin
      secret_key: minioadmin
      endpoint_url: http://localhost:9000
      region: us-east-1
    default_bucket: uploads
    is_primary: true  # This will be the primary storage
    encryption_enabled: false
    versioning_enabled: false
    minio_settings:
      secure: false  # Use HTTP instead of HTTPS

  # AWS S3 configuration (for production)
  aws_s3:
    provider: aws_s3
    credentials:
      access_key: ${AWS_ACCESS_KEY_ID}  # Use environment variable
      secret_key: ${AWS_SECRET_ACCESS_KEY}  # Use environment variable
      region: us-west-2
    default_bucket: my-rag-uploads
    is_primary: false  # Fallback storage
    encryption_enabled: true
    versioning_enabled: true
    aws_settings:
      storage_class: STANDARD_IA  # Infrequent Access for cost optimization

  # Google Cloud Storage configuration
  google_cloud:
    provider: google_cloud
    credentials:
      key_file_path: /path/to/service-account.json
    default_bucket: my-gcs-bucket
    is_primary: false
    encryption_enabled: true
    gcp_settings:
      # Optional: Customer-managed encryption key
      kms_key_name: projects/my-project/locations/global/keyRings/my-ring/cryptoKeys/my-key

  # Alibaba Cloud OSS configuration
  alibaba_oss:
    provider: alibaba_oss
    credentials:
      access_key: ${ALIBABA_ACCESS_KEY}
      secret_key: ${ALIBABA_SECRET_KEY}
      region: oss-cn-hangzhou
      endpoint_url: https://oss-cn-hangzhou.aliyuncs.com
    default_bucket: my-oss-bucket
    is_primary: false
    alibaba_settings:
      storage_class: IA  # Infrequent Access

# Storage policy configuration
policy:
  primary_provider: minio
  fallback_providers:
    - aws_s3
    - google_cloud
  auto_failover: true  # Automatically switch to fallback on primary failure
  replication_enabled: false  # Enable to replicate files across providers
  backup_enabled: true  # Enable periodic backups
  health_check_interval: 300  # Health check interval in seconds
  retention_days: 30  # File retention period

# Environment variable usage examples:
# 
# For MinIO:
# STORAGE_PROVIDER=minio
# STORAGE_ENDPOINT=http://localhost:9000
# STORAGE_ACCESS_KEY=minioadmin
# STORAGE_SECRET_KEY=minioadmin
# STORAGE_BUCKET=uploads
# STORAGE_SECURE=false
#
# For AWS S3:
# STORAGE_PROVIDER=aws_s3
# STORAGE_AWS_ACCESS_KEY=your-access-key
# STORAGE_AWS_SECRET_KEY=your-secret-key
# STORAGE_AWS_REGION=us-west-2
# STORAGE_AWS_BUCKET=your-bucket
# STORAGE_AWS_ENCRYPTION=true
#
# For Google Cloud:
# STORAGE_PROVIDER=google_cloud
# STORAGE_GCP_KEY_FILE=/path/to/service-account.json
# STORAGE_GCP_BUCKET=your-gcs-bucket
#
# For Alibaba OSS:
# STORAGE_PROVIDER=alibaba_oss
# STORAGE_OSS_ACCESS_KEY=your-access-key
# STORAGE_OSS_SECRET_KEY=your-secret-key
# STORAGE_OSS_REGION=oss-cn-hangzhou
# STORAGE_OSS_BUCKET=your-oss-bucket