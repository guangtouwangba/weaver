# ====================================
# Backend Environment Variables
# ====================================
# Copy this file to .env and fill in the values

# ====================================
# Database Configuration
# ====================================
# PostgreSQL connection string with asyncpg driver
DATABASE_URL=postgresql+asyncpg://research_rag:research_rag_dev@localhost:5432/research_rag

# For Supabase (production):
# ====================================
# Transaction Mode (Recommended) - Port 6543
# ====================================
# Uses connection pooling, supports more concurrent connections
# Best for: Applications with high concurrency
# Format: postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres
# Example:
# DATABASE_URL=postgresql://postgres.abcdefghijklmnop:[password]@aws-0-us-east-1.pooler.supabase.com:6543/postgres

# ====================================
# Session Mode (Alternative) - Port 5432
# ====================================
# Direct connection, limited concurrent connections
# Best for: Long-running connections, migrations
# Format: postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:5432/postgres
# Example:
# DATABASE_URL=postgresql://postgres.abcdefghijklmnop:[password]@aws-0-us-east-1.pooler.supabase.com:5432/postgres

# ====================================
# OpenRouter API Configuration
# ====================================
# Get your API key at: https://openrouter.ai/keys
OPENROUTER_API_KEY=sk-or-v1-your-key-here

# LLM Model (default: gpt-4o-mini)
# Other options: openai/gpt-4o, anthropic/claude-3.5-sonnet, etc.
LLM_MODEL=openai/gpt-4o-mini

# Embedding Model (OpenRouter supports OpenAI embedding models)
# Must use format: openai/text-embedding-3-small
EMBEDDING_MODEL=openai/text-embedding-3-small

# ====================================
# OpenAI API Configuration (Optional)
# ====================================
# Optional: Use OpenAI API directly instead of OpenRouter for embeddings
# Get your API key at: https://platform.openai.com/api-keys
# OPENAI_API_KEY=sk-your-openai-key-here

# ====================================
# Storage Configuration
# ====================================
# Local file upload directory
UPLOAD_DIR=./data/uploads

# Supabase Storage (optional, for production)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
STORAGE_BUCKET=documents

# ====================================
# CORS Configuration
# ====================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# For production:
# CORS_ORIGINS=https://your-frontend-domain.zeabur.app

# ====================================
# Environment & Logging
# ====================================
# Environment: development | production
ENVIRONMENT=development

# Log level: DEBUG | INFO | WARNING | ERROR
LOG_LEVEL=INFO

# ====================================
# Loki Logging Configuration
# ====================================
# Enable/disable Loki logging
LOKI_ENABLED=false

# Option 1: Local Loki (via docker-compose)
# LOKI_URL=http://localhost:3100/loki/api/v1/push
# LOKI_ENABLED=true

# Option 2: Remote Loki on Zeabur (for debugging production issues locally)
# LOKI_URL=https://your-loki-domain.zeabur.app/loki/api/v1/push
# LOKI_ENABLED=true

# Option 3: Zeabur internal network (for deployed services)
LOKI_URL=https://research-rag-loki.zeabur.app/loki/api/v1/push
# LOKI_ENABLED=true

# ====================================
# Evaluation - Ragas
# ====================================
# Enable real-time RAG evaluation after each query
# This will automatically evaluate answer quality using Ragas metrics
EVALUATION_ENABLED=false

# Sample rate: proportion of queries to evaluate (0.0 to 1.0)
# 0.1 = evaluate 10% of queries (recommended for cost control)
# 1.0 = evaluate all queries (expensive but comprehensive)
EVALUATION_SAMPLE_RATE=0.1

# ====================================
# Development Tips
# ====================================
# 1. Never commit .env file to git
# 2. Update this .env.example when adding new variables
# 3. Use strong passwords for production databases
# 4. Keep API keys secure and rotate regularly

