{
  "$schema": "https://example.com/research-agent-rag/design-system.schema.json",
  "version": "1.0.0",
  "design_system_name": "Research Agent RAG UI",
  "description": "Comprehensive design system for the Research Agent RAG web application. This file translates the Playful Productivity Workspace UI language (see docs/ux/design.json) and the design-system-showcase implementation into concrete tokens, component specs, and layout patterns that AI agents should follow when building or modifying UI features.",
  "references": {
    "design_language_spec": "docs/ux/design.json",
    "ui_showcase": "design-system-showcase/src",
    "web_app_frontend": "apps/web/src",
    "notes": [
      "All visual tokens (colors, spacing, radii, shadows, typography) MUST remain consistent with docs/ux/design.json.",
      "Tailwind-style token names in design-system-showcase (e.g. bg-surface-page, text-text-primary) map 1:1 to the tokens defined here.",
      "The main web app currently uses Ant Design components plus custom CSS; new work should align Ant theming and custom styles with these tokens."
    ]
  },
  "global_principles": {
    "visual_tone": [
      "Light, optimistic, and friendly workspace UI optimized for continuous knowledge work.",
      "Use generous whitespace and soft rounded containers over dense borders.",
      "Use color primarily for actions, states, and data ‚Äì backgrounds stay neutral and bright."
    ],
    "ux_principles": [
      "Prioritize clarity and scannability; key actions and content must be immediately obvious.",
      "Prefer shallow, contextual interactions over deep navigation; keep everything accessible within 1‚Äì2 clicks in the workspace.",
      "Surface system status via chips, badges, and inline metrics rather than heavy banners.",
      "Use progressive disclosure: start with summaries and overviews; reveal detail on click, hover, or expand."
    ],
    "brand_attributes": [
      "Modern, upbeat, and approachable ‚Äì but appropriate for a professional research tool.",
      "Soft geometry (rounded corners, pill controls) to reduce visual stress.",
      "Primary blue and emerald accents communicate reliability and positive progress."
    ],
    "attention_management_principles": [
      "Follow a clear rhythm of state feedback ‚Üí content understanding ‚Üí deeper operations on every page to reduce cognitive load.",
      "Use progressive disclosure (steppers, collapsible panels, tabbed content) for complex flows such as intake, persona configuration, and sharing.",
      "Make the next step explicit via a prominent CTA in the top-right or fixed footer on every major page (e.g., ‚Äò‰∏ã‰∏ÄÊ≠•‚Äô, ‚ÄòÂèëÈÄÅÂà∞ Action‚Äô, ‚ÄòÊü•ÁúãÊä•Âëä‚Äô).",
      "Align entry points with roles: knowledge workers land on the workspace dashboard, ops personas land on monitoring dashboards, while designers/PMs may go directly to evaluation reports.",
      "Use consistent feedback channels (toast + inline status + history views) so users can always trace the result of AI actions and background processing."
    ]
  },
  "tokens": {
    "colors": {
      "surface": {
        "page": "#F5F6F9",
        "card": "#FFFFFF",
        "subtle": "#F9FAFB"
      },
      "text": {
        "primary": "#111827",
        "secondary": "#4B5563",
        "muted": "#9CA3AF",
        "on_accent": "#FFFFFF",
        "on_warning": "#1F2933",
        "on_positive": "#064E3B"
      },
      "border": {
        "subtle": "#E5E7EB",
        "strong": "#D1D5DB",
        "focus": "#2563EB"
      },
      "primary": {
        "strong": "#3B82F6",
        "soft": "#E0ECFF",
        "hover": "#2563EB",
        "pressed": "#1D4ED8"
      },
      "secondary": {
        "indigo": "#6366F1",
        "purple": "#8B5CF6",
        "pink": "#EC4899"
      },
      "emerald": {
        "strong": "#10B981",
        "soft": "#D1FAE5"
      },
      "orange": {
        "strong": "#F97316",
        "soft": "#FFEDD5"
      },
      "yellow": {
        "strong": "#FACC15",
        "soft": "#FEF9C3"
      },
      "red": {
        "strong": "#F97373",
        "soft": "#FEE2E2"
      },
      "status": {
        "info": "#3B82F6",
        "success": "#10B981",
        "warning": "#FBBF24",
        "error": "#F97373",
        "neutral": "#6B7280"
      }
    },
    "spacing": {
      "scale_px": {
        "xxs": 4,
        "xs": 8,
        "sm": 12,
        "md": 16,
        "lg": 24,
        "xl": 32,
        "xxl": 40
      },
      "usage": {
        "section_gap": [24, 32],
        "card_padding": [16, 24],
        "inline_gap": [8, 12],
        "form_field_gap": [12, 16],
        "list_item_vertical_padding": [8, 12]
      }
    },
    "corner_radius": {
      "xs": 4,
      "sm": 8,
      "md": 12,
      "lg": 16,
      "pill": 999,
      "usage": {
        "cards": "lg",
        "modals": "lg",
        "inputs": "sm or md",
        "buttons": "pill",
        "chips": "pill",
        "avatar": "full circle"
      }
    },
    "shadow": {
      "none": {
        "css": "none"
      },
      "soft": {
        "css": "0 4px 16px 0 rgba(15, 23, 42, 0.08)"
      },
      "medium": {
        "css": "0 8px 24px 0 rgba(15, 23, 42, 0.12)"
      },
      "usage": [
        "Use no shadow for flat labels, quiet chips, and inline text elements.",
        "Use soft for cards, modals, and primary workspace panels.",
        "Use medium only for highly prominent overlays (global toasts, large dialogs)."
      ]
    },
    "typography": {
      "font_family": {
        "primary": "system-ui, -apple-system, BlinkMacSystemFont, SF Pro Text, Inter, sans-serif"
      },
      "scale": {
        "display_lg": {
          "size_px": 32,
          "line_height": 1.25,
          "weight": 600
        },
        "display_md": {
          "size_px": 24,
          "line_height": 1.3,
          "weight": 600
        },
        "title": {
          "size_px": 20,
          "line_height": 1.3,
          "weight": 600
        },
        "subtitle": {
          "size_px": 16,
          "line_height": 1.4,
          "weight": 500
        },
        "body": {
          "size_px": 14,
          "line_height": 1.5,
          "weight": 400
        },
        "body_bold": {
          "size_px": 14,
          "line_height": 1.5,
          "weight": 600
        },
        "caption": {
          "size_px": 12,
          "line_height": 1.5,
          "weight": 400
        },
        "label": {
          "size_px": 11,
          "line_height": 1.4,
          "weight": 600
        }
      },
      "alignment_rules": [
        "Use left alignment for all text by default.",
        "Use center alignment for empty states, standalone CTAs, or hero messages.",
        "Right-align numeric metrics in tables or summaries where it helps scanning."
      ]
    },
    "motion": {
      "timing_ms": {
        "fast": 120,
        "normal": 180,
        "slow": 240
      },
      "easing": {
        "standard": "cubic-bezier(0.2, 0.8, 0.2, 1)",
        "emphasized": "cubic-bezier(0.2, 1, 0.2, 1)"
      },
      "usage_guidelines": [
        "Animations are subtle and functional: quick fades, slides of 4‚Äì8 px, no bouncy or overshooting effects.",
        "Use motion mainly for entrance/exit of drawers, dropdowns, and expanding panels.",
        "Do not block user interactions or delay content for the sake of animation."
      ]
    }
  },
  "layout": {
    "page_background": {
      "color_token": "surface/page",
      "description": "Full viewport background for all app pages. Must remain light and low contrast."
    },
    "grid": {
      "columns": 12,
      "max_content_width_px": 1280,
      "gutter_px": 24,
      "alignment": "left-aligned content within a centered page container"
    },
    "regions": {
      "top_region": {
        "role": "Global navigation, topic breadcrumbs, top-level filters and tabs.",
        "background_color_token": "surface/card",
        "elevation": "soft",
        "padding": {
          "x": "lg",
          "y": "md"
        },
        "border_bottom": {
          "color_token": "border/subtle",
          "thickness_px": 1
        }
      },
      "main_region": {
        "role": "Primary working area: topics, content lists, chat panel, graphs.",
        "padding": {
          "x": "lg",
          "y": "xl"
        }
      },
      "side_region": {
        "role": "Optional secondary panels (e.g., knowledge graph drawer, notes, settings).",
        "width_px": 280,
        "behavior": "Right-aligned, collapsible; appears as a card or drawer on top of the main region."
      }
    },
    "workspace_patterns": {
      "topics_list_page": {
        "description": "Landing page listing all topics with cards and progress summaries.",
        "sections": [
          "Header: page title, optional filters, quick actions.",
          "Summary row: key metrics (topics count, in-progress, completed) as metric cards.",
          "Grid of topic cards: 2‚Äì3 columns on desktop, 1 column on mobile."
        ]
      },
      "topic_workspace_page": {
        "description": "Topic detail page used in TopicWorkspace.",
        "sections": [
          "Top bar: back button, topic-level tools (knowledge graph, notes, citations, settings).",
          "Compact topic header card: topic name, status chip, goal type chip, meta counters.",
          "Main card with tabs: chat workspace, document management, and future tools.",
          "Left column in chat tab: conversation list as a vertical column list.",
          "Right column in chat tab: doc range selector + ChatPanel card stacked vertically."
        ],
        "background": "#f0f2f5",
        "card_style": {
          "background": "surface/card",
          "radius": "md",
          "shadow": "soft"
        }
      },
      "workspace_dashboard": {
        "description": "System-level entry page summarizing Capture, Insight, Action, and Observability status for the current user persona.",
        "sections": [
          "Hero summary row with 3‚Äì4 key KPIs (e.g., pending documents, new insights, current quality score, alerts) using metric cards.",
          "Top 3 pending items list (documents to process, tasks to review) with clear CTAs such as ‚ÄòÁªßÁª≠Â§ÑÁêÜ‚Äô or ‚ÄòÂéª Insight‚Äô.",
          "Persona-tailored modules (e.g., Capture queue for knowledge workers, monitoring cards for ops) arranged in 2‚Äì3 columns."
        ],
        "layout": {
          "page_background_token": "surface/page",
          "grid_columns": 12,
          "modules_per_row_desktop": 3
        }
      },
      "capture_hub_intake": {
        "description": "Multi-source upload / intake wizard for documents, webpages, conversations, and email.",
        "sections": [
          "Left panel: source selection (document, web, conversation, email, etc.) using segmented controls and icons.",
          "Central stepper form: upload or connect source, assign topics/tags, confirm configuration.",
          "Right rail: contextual help and FAQ that remains fixed while steps change."
        ],
        "layout": {
          "pattern": "three_column",
          "stepper_position": "top_center",
          "progress_indicator": "stepper + percentage"
        }
      },
      "capture_hub_task_queue": {
        "description": "Processing/queue view showing parsing progress, quality scores, and errors.",
        "sections": [
          "Top filter bar for status, priority, and source type.",
          "Main table or list of tasks sorted by priority, with status chips and quality scores.",
          "Right-side sticky panel with contextual help, recent failures, and quick links to Insight Forge."
        ]
      },
      "capture_hub_review": {
        "description": "Content review / QA page where humans validate AI-extracted concepts and tags.",
        "sections": [
          "Central review canvas showing AI-extracted concepts, tags, and summaries.",
          "Left side: navigation through sections or items to review.",
          "Right side: suggestions and manual editing tools.",
          "Bottom bar: actions for accept, edit, or send back to queue."
        ]
      },
      "insight_forge_main": {
        "description": "Main Insight Forge page that turns a single document into structured knowledge cards, summaries, and persona-tailored insights.",
        "page_theme": {
          "background_hex": "#0B1120",
          "card_background_token": "surface/card",
          "card_contrast": "high"
        },
        "sections": [
          "Hero Zone at the top: document title, source, tags, processing status, and progress indicator.",
          "Horizontal AI Knowledge Cards strip directly under the hero section, scrollable when many cards exist.",
          "Insight Canvas below: three-column layout with Summary & Key Points, Perspective Comparison, and AI Insights & Next Steps.",
          "Persona Switcher docked in the top-right of the canvas and always visible.",
          "Reference Strip pinned at the bottom, providing chapter navigation and raw source previews."
        ],
        "layout": {
          "hero_height_px": 96,
          "cards_row_scroll": "horizontal",
          "canvas_columns": 3
        }
      },
      "insight_forge_persona_templates": {
        "description": "Persona template management page for defining and editing persona weights.",
        "sections": [
          "Left sidebar list of personas with search and quick filters (e.g., team templates vs personal).",
          "Right-side form for editing persona attributes and weights, including name, description, and sliders.",
          "Top banner reminding which persona template is currently applied in Insight Forge."
        ]
      },
      "insight_forge_card_library": {
        "description": "Knowledge card library for browsing, searching, and curating cards produced by Insight Forge.",
        "sections": [
          "Top filter bar with search, topic filters, persona filters, and type filters.",
          "Main table or masonry grid listing cards with preview, type tag, and updated time.",
          "Top-right actions to send selected cards into Action Engine Playbooks or export/share."
        ]
      },
      "action_engine_console": {
        "description": "Scenario-based RAG console for running queries with context and templates.",
        "sections": [
          "Left column: scenario settings, templates, and knobs (persona, time horizon, strictness).",
          "Center column: primary Q&A chat area with streaming responses and inline citations.",
          "Right column: sources, evaluation metrics, and inline RAGAS-like scores."
        ]
      },
      "action_engine_playbook_builder": {
        "description": "Workflow builder that strings together cards and summaries into task flows or templates.",
        "sections": [
          "Timeline-like central canvas where each step is a block referencing one or more cards.",
          "Left panel: available card library / components to drag into the flow.",
          "Top banner: persona and scenario indicators plus save/export controls."
        ]
      },
      "action_engine_history": {
        "description": "History and citation view for previous RAG sessions.",
        "sections": [
          "Table listing questions, key scores, citation counts, and last run time.",
          "Detail panel per row showing sources used, answer summary, and re-run buttons."
        ]
      },
      "graph_explorer": {
        "description": "Interactive graph visualization of knowledge entities and relationships.",
        "sections": [
          "Graph canvas occupying the center with zoom and pan controls.",
          "Minimal overlays for filters and legend, kept away from the graph center.",
          "Right-side delayed AI suggestions panel that surfaces exploration hints after initial load."
        ]
      },
      "graph_cross_topic_linker": {
        "description": "View for exploring bridge nodes between topics.",
        "sections": [
          "Split view with each topic summary on the left and right.",
          "Central area highlighting bridge nodes and relationships.",
          "Top status bar showing computation progress and filters."
        ]
      },
      "graph_share_embed": {
        "description": "Configuration flow for sharing graph views and generating embed codes.",
        "sections": [
          "Stepper modal with three steps: scope selection, permission configuration, and link/embed generation.",
          "Each step focuses on exactly one configuration area to keep cognitive load low."
        ]
      },
      "ops_monitoring_dashboard": {
        "description": "Ops-focused monitoring dashboard for latency, errors, costs, and cache hit rates.",
        "sections": [
          "Top row of KPI cards for the most important metrics.",
          "Middle row of charts (line/bar) showing trends over time.",
          "Right-side column listing current alerts with quick links to trace views."
        ]
      },
      "evaluation_report_page": {
        "description": "Evaluation report view for runtime evaluation metrics and recommendations.",
        "sections": [
          "Top section showing overall score, sample count, and timeframe.",
          "Main list structured as question ‚Üí score ‚Üí citations ‚Üí recommended adjustments.",
          "Right or bottom panel for trend charts and drill-down into low-scoring queries."
        ]
      },
      "log_trace_viewer": {
        "description": "Log and trace viewer for inspecting individual requests.",
        "sections": [
          "Top filter bar with quick filters (trace ID, user, time range).",
          "Central timeline-style view of request lifecycle events.",
          "Bottom pane showing raw logs and payloads for deep debugging."
        ]
      },
      "modal_and_drawer": {
        "description": "Modal dialogs (TopicForm, ContentUploadModal) and drawers (FunctionDrawer).",
        "modal": {
          "width_px": 640,
          "background_color_token": "surface/card",
          "corner_radius_token": "lg",
          "shadow_token": "medium",
          "header_padding_px": 20,
          "body_padding_px": 20,
          "footer_padding_px": 16
        },
        "drawer": {
          "width_px": 360,
          "background_color_token": "surface/card",
          "corner_radius_token": "md",
          "shadow_token": "medium"
        }
      }
    }
  },
  "components": {
    "button": {
      "description": "Primary action control used across topics pages, workspace toolbar, and cards.",
      "variants": {
        "primary": {
          "shape": "pill",
          "height_px": 40,
          "padding_horizontal_px": 20,
          "background_color_token": "primary/strong",
          "text_color_token": "text/on_accent",
          "border_color_token": "transparent",
          "hover": {
            "background_color_token": "primary/hover",
            "shadow_token": "soft"
          },
          "active": {
            "background_color_token": "primary/pressed",
            "shadow_token": "none"
          },
          "disabled": {
            "opacity": 0.4,
            "shadow_token": "none"
          }
        },
        "secondary": {
          "shape": "pill",
          "height_px": 36,
          "padding_horizontal_px": 18,
          "background_color_token": "surface/card",
          "text_color_token": "text/primary",
          "border_color_token": "border/strong",
          "hover": {
            "background_color_token": "surface/subtle"
          }
        },
        "ghost": {
          "shape": "pill",
          "height_px": 32,
          "padding_horizontal_px": 16,
          "background_color_token": "transparent",
          "text_color_token": "text/secondary",
          "hover": {
            "background_color_token": "surface/subtle"
          }
        },
        "tiny": {
          "shape": "pill",
          "height_px": 24,
          "padding_horizontal_px": 12,
          "text_style_token": "typography/label",
          "background_color_token": "surface/subtle",
          "text_color_token": "text/secondary",
          "hover": {
            "background_color_token": "primary/soft"
          }
        }
      },
      "ant_mapping": {
        "primary": {
          "component": "Button",
          "props": {
            "type": "primary",
            "shape": "round"
          },
          "custom_css": {
            "borderRadius": "999px",
            "backgroundColor": "primary/strong",
            "boxShadow": "shadow/soft"
          }
        },
        "secondary": {
          "component": "Button",
          "props": {
            "type": "default",
            "shape": "round"
          }
        },
        "ghost": {
          "component": "Button",
          "props": {
            "type": "text",
            "shape": "round"
          }
        }
      }
    },
    "chip": {
      "description": "Status and tag pills used for topic status, goal type, activity badges, and semantic states.",
      "base_style": {
        "height_px": 24,
        "padding_horizontal_px": 10,
        "radius": "pill",
        "text_style_token": "typography/label",
        "gap_between_chips_px": 8
      },
      "variants": {
        "pending": {
          "background_color_token": "yellow/soft",
          "text_color_token": "text/on_warning"
        },
        "confirmed": {
          "background_color_token": "emerald/soft",
          "text_color_token": "emerald/strong"
        },
        "alert": {
          "background_color_token": "red/soft",
          "text_color_token": "red/strong"
        },
        "active": {
          "background_color_token": "primary/soft",
          "text_color_token": "primary/strong"
        },
        "closed": {
          "background_color_token": "surface/subtle",
          "text_color_token": "text/muted"
        },
        "info": {
          "background_color_token": "primary/soft",
          "text_color_token": "primary/strong"
        },
        "success": {
          "background_color_token": "emerald/soft",
          "text_color_token": "emerald/strong"
        },
        "warning": {
          "background_color_token": "orange/soft",
          "text_color_token": "text/on_warning"
        },
        "error": {
          "background_color_token": "red/soft",
          "text_color_token": "text/on_warning"
        }
      }
    },
    "card": {
      "description": "Primary container for grouping information: topic summaries, metric cards, chat panel, lists.",
      "base_style": {
        "background_color_token": "surface/card",
        "corner_radius_token": "lg",
        "padding_px": 20,
        "shadow_token": "soft",
        "border_color_token": "border/subtle"
      },
      "sections": {
        "header": {
          "layout": "Horizontal; title on the left, optional meta or actions on the right.",
          "bottom_spacing_px": 12,
          "title_style_token": "typography/title",
          "subtitle_style_token": "typography/caption"
        },
        "body": {
          "spacing_between_rows_px": 8
        },
        "footer": {
          "top_spacing_px": 12,
          "border_top": {
            "color_token": "border/subtle",
            "thickness_px": 1
          }
        }
      }
    },
    "list_item": {
      "description": "Horizontal rows used in ConversationList, ContentList, and activity feeds.",
      "layout": {
        "structure": "Avatar or icon on the left, text stack in the center, status or actions on the right.",
        "height_px": 56,
        "padding_horizontal_px": 16,
        "gap_px": 12
      },
      "text": {
        "title_style_token": "typography/body_bold",
        "subtitle_style_token": "typography/caption"
      },
      "dividers": {
        "enabled": true,
        "color_token": "border/subtle"
      }
    },
    "tabs": {
      "description": "Top-level mode switches: e.g., Êô∫ËÉΩÂØπËØù vs ÊñáÊ°£ÁÆ°ÁêÜ in TopicWorkspace.",
      "style": {
        "height_px": 32,
        "padding_horizontal_px": 14,
        "gap_between_tabs_px": 8,
        "active": {
          "background_color_token": "primary/strong",
          "text_color_token": "text/on_accent"
        },
        "inactive": {
          "background_color_token": "surface/subtle",
          "text_color_token": "text/secondary"
        }
      },
      "ant_mapping": {
        "component": "Tabs",
        "props": {
          "size": "large"
        },
        "custom_css": {
          "tabBarStyle": {
            "margin": "0 16px",
            "paddingTop": "8px"
          }
        }
      }
    },
    "input": {
      "description": "Single-line and multi-line text fields used in TopicForm, search controls, and ChatInput.",
      "base_style": {
        "height_px": 40,
        "padding_horizontal_px": 12,
        "background_color_token": "surface/card",
        "border_color_token": "border/subtle",
        "corner_radius_token": "md",
        "label_style_token": "typography/caption",
        "placeholder_color_token": "text/muted"
      },
      "states": {
        "default": {
          "border_color_token": "border/subtle"
        },
        "focused": {
          "border_color_token": "border/focus",
          "shadow_token": "soft"
        },
        "error": {
          "border_color_token": "red/strong",
          "helper_text_color_token": "red/strong"
        },
        "disabled": {
          "opacity": 0.4
        }
      }
    },
    "banner": {
      "description": "Inline notifications and alerts, e.g., upload success, warnings, errors.",
      "variants": {
        "info": {
          "background_color_token": "primary/soft",
          "text_color_token": "primary/strong"
        },
        "success": {
          "background_color_token": "emerald/soft",
          "text_color_token": "emerald/strong"
        },
        "warning": {
          "background_color_token": "orange/soft",
          "text_color_token": "text/on_warning"
        },
        "error": {
          "background_color_token": "red/soft",
          "text_color_token": "text/on_warning"
        }
      },
      "layout": {
        "padding_px": 12,
        "radius_token": "md",
        "gap_px": 8,
        "structure": "Icon on the left, message text in the center, optional close/action on the right."
      }
    },
    "progress_bar": {
      "description": "Thin rounded bars for TopicProgressChart, storage usage, and general metrics.",
      "base_style": {
        "height_px": 6,
        "corner_radius_px": 999,
        "track_color_token": "surface/subtle",
        "fill_color_token": "primary/strong"
      },
      "semantic_colors": {
        "primary": "primary/strong",
        "emerald": "emerald/strong",
        "orange": "orange/strong",
        "red": "red/strong"
      }
    },
    "avatar": {
      "description": "Circular user and participant avatars with optional initials.",
      "shape": "circle",
      "sizes_px": {
        "sm": 24,
        "md": 32,
        "lg": 40
      },
      "group": {
        "overlap_offset_px": 8,
        "max_visible": 3
      }
    },
    "empty_state": {
      "description": "Panels displayed when lists or chat histories are empty.",
      "layout": {
        "alignment": "center",
        "padding_px": 24,
        "background_color_token": "surface/card",
        "corner_radius_token": "lg",
        "icon_size_px": 48
      },
      "typography": {
        "title_style_token": "typography/subtitle",
        "description_style_token": "typography/body"
      }
    },
    "tokenized_input_field": {
      "description": "Multi-select token field pattern (for future tags/recipients features).",
      "container": {
        "height_px": 44,
        "padding_horizontal_px": 10,
        "padding_vertical_px": 8,
        "corner_radius_px": 12,
        "background_color_token": "surface/card",
        "border_width_px": 2,
        "border_color_token": "border/subtle",
        "focused_border_color_token": "border/focus"
      },
      "token_layout": {
        "base_component": "chip",
        "row_gap_px": 4,
        "inline_gap_px": 8,
        "max_visible_rows": 2
      }
    },
    "app_specific": {
      "topic_card": {
        "description": "Card representing a topic on the topics list page.",
        "header": {
          "title_style_token": "typography/title",
          "meta": [
            "Status chip using chip variants (e.g., active, closed).",
            "Goal type chip styled as surface/subtle background with accent text."
          ]
        },
        "body": {
          "shows": [
            "Short description (2‚Äì3 lines).",
            "Key stats: number of contents, completion percentage."
          ]
        },
        "footer": {
          "contains": [
            "Progress bar using progress_bar component.",
            "Secondary actions like 'Continue', 'Open workspace'."
          ]
        }
      },
      "topic_workspace_header": {
        "description": "Compact header bar inside TopicWorkspace.",
        "layout": {
          "background_color_token": "surface/card",
          "corner_radius_px": 8,
          "padding_horizontal_px": 16,
          "padding_vertical_px": 12,
          "shadow_token": "soft"
        },
        "content": [
          "Topic name as Typography.Title level=4.",
          "Status chip and goal type chip inline.",
          "Tiny meta separators (‚Ä¢) with small caption text.",
          "Right-aligned 'Edit' and 'Delete' buttons in secondary style."
        ]
      },
      "conversation_list": {
        "description": "Left column in chat tab listing previous conversations.",
        "layout": {
          "width_px": 280,
          "background_color_token": "surface/card",
          "corner_radius_px": 8,
          "shadow_token": "soft"
        },
        "item_style": {
          "height_px": 56,
          "hover_background_color_token": "surface/subtle",
          "selected_background_color_token": "primary/soft",
          "selected_border_color_token": "primary/strong"
        }
      },
      "chat_panel": {
        "description": "Right-side ChatPanel card including message list, quick questions, and ChatInput.",
        "layout": {
          "card_style": "card.base_style",
          "body_flex_direction": "column",
          "sections": [
            "Scrollable message list (flex:1, overflow-y: auto).",
            "Quick questions chip row with small gap.",
            "Chat input at bottom with fixed padding."
          ]
        },
        "behavior": [
          "When no conversationId is set, show a welcome assistant message aligned left.",
          "User messages align right, use primary/soft bubble; assistant messages align left, use surface/subtle bubble.",
          "Use subtle timestamps in caption style under each bubble."
        ]
      },
      "document_selector_strip": {
        "description": "Thin strip above ChatPanel showing selected document range.",
        "layout": {
          "background_color_token": "surface/subtle",
          "corner_radius_px": 6,
          "padding_horizontal_px": 12,
          "padding_vertical_px": 8,
          "content_alignment": "space-between"
        },
        "content": [
          "Left: label 'üéØ ÂØπËØùËåÉÂõ¥Ôºö' in muted caption style.",
          "Right: small link-style button for ÂÖ®ÈÄâ/ÂèñÊ∂àÂÖ®ÈÄâ, using text color primary and underline on hover."
        ]
      },
      "content_list": {
        "description": "Scrollable list of topic contents in ÊñáÊ°£ÁÆ°ÁêÜ tab.",
        "layout": {
          "card_body_height": "fill remain height",
          "overflow_y": "auto",
          "row_style": "list_item"
        }
      },
      "source_detail_modal": {
        "description": "Modal showing full source document snippet for a citation.",
        "layout": {
          "width_px": 720,
          "body_scroll": true,
          "padding_px": 20
        },
        "content": [
          "Badge indicating document type or source.",
          "Monospaced or small-body text for the snippet.",
          "Metadata (title, author, page) in caption style at the top or bottom."
        ]
      },
      "workspace_dashboard": {
        "description": "Top-level dashboard summarizing Capture, Insight, Action, and Observability modules for the current user.",
        "layout": {
          "header": {
            "shows": [
              "Product name and workspace title.",
              "Persona-aware shortcut chips such as ‚ÄòÂéª Capture Hub‚Äô, ‚ÄòÊâìÂºÄ Insight Forge‚Äô, ‚ÄòÊü•ÁúãÁõëÊéß‚Äô."
            ]
          },
          "body": {
            "modules": [
              "Capture Hub card summarizing pending uploads and processing status.",
              "Insight Forge card highlighting new or updated knowledge cards.",
              "Action Engine card linking to recent playbooks or console sessions.",
              "Observability card with key metrics and alerts."
            ],
            "use_metric_cards_for_kpis": true
          }
        }
      },
      "insight_forge": {
        "description": "Bundle of components that make up the Insight Forge experience.",
        "hero_zone": {
          "description": "Top strip with document identity and processing status.",
          "layout": {
            "background": "surface/card",
            "padding_px": 20,
            "corner_radius_px": 16,
            "shadow_token": "soft"
          },
          "content": [
            "Document title, source icon, and tags.",
            "Status pill and progress bar indicating processing state.",
            "CTA group for ‚ÄòÂèëÈÄÅÂà∞ Action‚Äô, ‚ÄòÊü•ÁúãÂõæË∞±‚Äô, and persona selection."
          ]
        },
        "knowledge_card": {
          "description": "Atomic card representing one concept, insight, or fact from a document.",
          "layout": {
            "width_px": 320,
            "background_color_token": "surface/card",
            "corner_radius_token": "lg",
            "shadow_token": "soft",
            "padding_px": 16
          },
          "sections": [
            "Top row: type label chip (e.g., Ê¶ÇÂøµ, ÁªìËÆ∫, È£éÈô©) and optional status icon.",
            "Title line with truncation after one row.",
            "One-sentence summary body.",
            "Reference line (e.g., Pg.3, para 2) linking back to reference strip.",
            "Footer actions: Êî∂Ëóè, Â§çÂà∂, ÊâπÊ≥®, Êõ¥Â§ö."
          ],
          "states": [
            "Skeleton for loading.",
            "Error state with retry button."
          ]
        },
        "insight_canvas": {
          "description": "Three-column area combining summary, perspective comparison, and AI next steps.",
          "columns": {
            "summary": {
              "title": "Summary & Key Points",
              "content_type": "multi-paragraph text with bullets",
              "interactions": [
                "Copy section",
                "Edit inline",
                "Jump to references"
              ]
            },
            "perspective_comparison": {
              "title": "Perspective Comparison",
              "structure": [
                "Support column",
                "Oppose column",
                "Neutral column"
              ],
              "extras": [
                "Confidence or weight indicator per item",
                "Toggle between list view and relationship graph view"
              ]
            },
            "ai_insights_next_steps": {
              "title": "AI Insights & Next Steps",
              "content_type": "actionable bullet list grouped by themes",
              "extras": [
                "Checkmarks for completed actions",
                "Buttons to send actions to Action Engine as steps"
              ]
            }
          }
        },
        "persona_panel": {
          "description": "Persona switcher and current persona insight summary.",
          "layout": {
            "attachment": "top_right_overlay",
            "background_color_token": "surface/card",
            "corner_radius_px": 12,
            "shadow_token": "soft"
          },
          "content": [
            "Persona selector (dropdown or segmented control).",
            "Button to open persona template management.",
            "Short list of persona-specific key insights and recommendations with difference-highlighting."
          ]
        },
        "reference_strip": {
          "description": "Bottom strip for quickly navigating original document sections.",
          "layout": {
            "position": "bottom",
            "background_color_token": "surface/card",
            "corner_radius_px": 12,
            "padding_px": 12,
            "shadow_token": "soft",
            "scroll_direction": "horizontal"
          },
          "content": [
            "Thumbnail-like cards per section with title and brief snippet.",
            "Clicking a section scrolls or jumps the main content/preview to that location."
          ]
        }
      },
      "action_engine_console": {
        "description": "Configured RAG console as described in System_Pages.",
        "layout": {
          "columns": [
            "Left: scenario & template controls.",
            "Center: chat transcript with streaming answers and inline citations.",
            "Right: source list, evaluation scores, and toggles for debugging mode."
          ]
        }
      },
      "ops_monitoring_dashboard": {
        "description": "Ops monitoring dashboard aligning with Observability & Evaluation design.",
        "layout": {
          "kpi_row": [
            "query_latency_p95",
            "error_rate",
            "token_cost",
            "cache_hit_rate"
          ],
          "charts": [
            "latency_over_time",
            "errors_over_time",
            "cost_over_time"
          ],
          "alerts_panel": {
            "position": "right",
            "item_style": "list_item"
          }
        }
      },
      "evaluation_report_page": {
        "description": "Runtime evaluation report with scores and improvement suggestions.",
        "layout": {
          "header": [
            "overall_score",
            "sample_count",
            "date_range"
          ],
          "body": [
            "table of questions with per-metric scores and citation counts",
            "detail drawer with example answers, contexts, and suggested changes"
          ]
        }
      },
      "log_trace_viewer": {
        "description": "Trace viewer UI as described in System_Pages.",
        "layout": {
          "filters": [
            "trace_id",
            "user",
            "time_range"
          ],
          "timeline": "central vertical timeline of events",
          "raw_log_pane": "bottom panel with expandable JSON/log entries"
        }
      }
    }
  },
  "accessibility": {
    "contrast": [
      "All text and important icons must meet WCAG AA contrast ratios against their backgrounds.",
      "Semantic chips must pair light backgrounds with sufficiently dark label text."
    ],
    "hit_targets": [
      "Interactive controls (buttons, chips, icons-as-buttons) should have at least 40x40 px hit area.",
      "Increase padding instead of shrinking icon sizes to meet targets."
    ],
    "keyboard_and_screen_reader": [
      "All focusable elements must be reachable via keyboard (Tab/Shift+Tab).",
      "Always display a visible focus ring using border/focus token or equivalent outline.",
      "Icons that act as buttons must include aria-label or be wrapped with visible text."
    ]
  },
  "implementation_notes": {
    "tailwind_mapping": {
      "bg-surface-page": "colors.surface.page",
      "bg-surface-card": "colors.surface.card",
      "bg-surface-subtle": "colors.surface.subtle",
      "text-text-primary": "colors.text.primary",
      "text-text-secondary": "colors.text.secondary",
      "text-text-muted": "colors.text.muted",
      "shadow-soft": "shadow.soft",
      "shadow-medium": "shadow.medium",
      "rounded-lg": "corner_radius.lg",
      "rounded-pill": "corner_radius.pill",
      "px-lg": "spacing.lg horizontal padding",
      "py-md": "spacing.md vertical padding",
      "gap-xs": "spacing.xs"
    },
    "antd_theme_mapping": {
      "primaryColor": "colors.primary.strong",
      "infoColor": "colors.status.info",
      "successColor": "colors.status.success",
      "warningColor": "colors.status.warning",
      "errorColor": "colors.status.error",
      "borderRadius": 8,
      "fontFamily": "tokens.typography.font_family.primary"
    },
    "usage_for_ai_agents": [
      "When generating new UI components, always reference tokens and component specs from this file instead of inventing new colors, spacings, or radii.",
      "When extending existing pages (Topics, TopicWorkspace, chat), reuse the patterns defined in layout.workspace_patterns and components.app_specific.",
      "When touching Ant Design components, prefer adjusting theme tokens and inline styles that align with these tokens, rather than mixing unrelated design languages.",
      "Any new semantic state (chips, banners, statuses) must be expressed using existing color/status tokens unless a truly new meaning is required."
    ]
  }
}


