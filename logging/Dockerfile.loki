FROM grafana/loki:latest

# Create data directory
RUN mkdir -p /loki/chunks /loki/rules /loki/compactor

# Copy custom configuration
COPY loki-config.yaml /etc/loki/local-config.yaml

# Expose Loki port
EXPOSE 3100

# Volume for data persistence
VOLUME ["/loki"]

# Run Loki with custom config
ENTRYPOINT ["/usr/bin/loki"]
CMD ["-config.file=/etc/loki/local-config.yaml"]

